import{d as $e,T as H,b4 as At,B as T,u as I,bp as xe,o as Ve,aP as Lt,ca as Ot,r as W,j as i,b as ce,P as ue,eA as J,F as N,iz as kt,aS as Re,bF as _t,iZ as Nt,e as yt,aO as It,an as Ee,U as Ne,ao as Vt,i_ as Ye,bW as Ue,b0 as Dt,b1 as Ft,bZ as Gt,S as We,L as jt,i$ as Bt,bb as zt,ae as qt,af as Ht,Z as Yt,x as Xe,bx as Ze,iB as Ut,b7 as Ie,hm as Wt,j0 as Xt,bE as Zt,a1 as Qt,bi as Qe,f as Jt,eh as Kt,j1 as es}from"./strapi-60hOZl5W.js";import{p as he,s as L,c as F,l as De,r as ye,d as St,a as Pt,b as wt,i as ts,v as ss}from"./lt-CqClhze9.js";const rs=he,as=(t,e)=>{const s=rs(t.trim().replace(/^[=v]+/,""),e);return s?s.version:null};var ns=as;const Je=L,is=(t,e,s,r,a)=>{typeof s=="string"&&(a=r,r=s,s=void 0);try{return new Je(t instanceof Je?t.version:t,s).inc(e,r,a).version}catch{return null}};var os=is;const Ke=he,ls=(t,e)=>{const s=Ke(t,null,!0),r=Ke(e,null,!0),a=s.compare(r);if(a===0)return null;const n=a>0,o=n?s:r,h=n?r:s,u=!!o.prerelease.length;if(!!h.prerelease.length&&!u)return!h.patch&&!h.minor?"major":o.patch?"patch":o.minor?"minor":"major";const l=u?"pre":"";return s.major!==r.major?l+"major":s.minor!==r.minor?l+"minor":s.patch!==r.patch?l+"patch":"prerelease"};var cs=ls;const us=L,hs=(t,e)=>new us(t,e).major;var ds=hs;const fs=L,gs=(t,e)=>new fs(t,e).minor;var ps=gs;const ms=L,vs=(t,e)=>new ms(t,e).patch;var $s=vs;const xs=he,ys=(t,e)=>{const s=xs(t,e);return s&&s.prerelease.length?s.prerelease:null};var js=ys;const Ss=F,Ps=(t,e,s)=>Ss(e,t,s);var ws=Ps;const bs=F,Rs=(t,e)=>bs(t,e,!0);var Es=Rs;const et=L,Cs=(t,e,s)=>{const r=new et(t,s),a=new et(e,s);return r.compare(a)||r.compareBuild(a)};var Fe=Cs;const Ms=Fe,Ts=(t,e)=>t.sort((s,r)=>Ms(s,r,e));var As=Ts;const Ls=Fe,Os=(t,e)=>t.sort((s,r)=>Ls(r,s,e));var ks=Os;const _s=F,Ns=(t,e,s)=>_s(t,e,s)>0;var je=Ns;const Is=F,Vs=(t,e,s)=>Is(t,e,s)===0;var bt=Vs;const Ds=F,Fs=(t,e,s)=>Ds(t,e,s)!==0;var Rt=Fs;const Gs=F,Bs=(t,e,s)=>Gs(t,e,s)>=0;var Ge=Bs;const zs=F,qs=(t,e,s)=>zs(t,e,s)<=0;var Be=qs;const Hs=bt,Ys=Rt,Us=je,Ws=Ge,Xs=De,Zs=Be,Qs=(t,e,s,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof s=="object"&&(s=s.version),t===s;case"!==":return typeof t=="object"&&(t=t.version),typeof s=="object"&&(s=s.version),t!==s;case"":case"=":case"==":return Hs(t,s,r);case"!=":return Ys(t,s,r);case">":return Us(t,s,r);case">=":return Ws(t,s,r);case"<":return Xs(t,s,r);case"<=":return Zs(t,s,r);default:throw new TypeError(`Invalid operator: ${e}`)}};var Et=Qs;const Js=L,Ks=he,{safeRe:fe,t:ge}=ye,er=(t,e)=>{if(t instanceof Js)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let s=null;if(!e.rtl)s=t.match(fe[ge.COERCE]);else{let r;for(;(r=fe[ge.COERCERTL].exec(t))&&(!s||s.index+s[0].length!==t.length);)(!s||r.index+r[0].length!==s.index+s[0].length)&&(s=r),fe[ge.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;fe[ge.COERCERTL].lastIndex=-1}return s===null?null:Ks(`${s[2]}.${s[3]||"0"}.${s[4]||"0"}`,e)};var tr=er,Ce,tt;function sr(){return tt||(tt=1,Ce=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),Ce}var rr=S;S.Node=X;S.create=S;function S(t){var e=this;if(e instanceof S||(e=new S),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(a){e.push(a)});else if(arguments.length>0)for(var s=0,r=arguments.length;s<r;s++)e.push(arguments[s]);return e}S.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,s=t.prev;return e&&(e.prev=s),s&&(s.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=s),t.list.length--,t.next=null,t.prev=null,t.list=null,e};S.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};S.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};S.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)nr(this,arguments[t]);return this.length};S.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)ir(this,arguments[t]);return this.length};S.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};S.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};S.prototype.forEach=function(t,e){e=e||this;for(var s=this.head,r=0;s!==null;r++)t.call(e,s.value,r,this),s=s.next};S.prototype.forEachReverse=function(t,e){e=e||this;for(var s=this.tail,r=this.length-1;s!==null;r--)t.call(e,s.value,r,this),s=s.prev};S.prototype.get=function(t){for(var e=0,s=this.head;s!==null&&e<t;e++)s=s.next;if(e===t&&s!==null)return s.value};S.prototype.getReverse=function(t){for(var e=0,s=this.tail;s!==null&&e<t;e++)s=s.prev;if(e===t&&s!==null)return s.value};S.prototype.map=function(t,e){e=e||this;for(var s=new S,r=this.head;r!==null;)s.push(t.call(e,r.value,this)),r=r.next;return s};S.prototype.mapReverse=function(t,e){e=e||this;for(var s=new S,r=this.tail;r!==null;)s.push(t.call(e,r.value,this)),r=r.prev;return s};S.prototype.reduce=function(t,e){var s,r=this.head;if(arguments.length>1)s=e;else if(this.head)r=this.head.next,s=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var a=0;r!==null;a++)s=t(s,r.value,a),r=r.next;return s};S.prototype.reduceReverse=function(t,e){var s,r=this.tail;if(arguments.length>1)s=e;else if(this.tail)r=this.tail.prev,s=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var a=this.length-1;r!==null;a--)s=t(s,r.value,a),r=r.prev;return s};S.prototype.toArray=function(){for(var t=new Array(this.length),e=0,s=this.head;s!==null;e++)t[e]=s.value,s=s.next;return t};S.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,s=this.tail;s!==null;e++)t[e]=s.value,s=s.prev;return t};S.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var s=new S;if(e<t||e<0)return s;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,a=this.head;a!==null&&r<t;r++)a=a.next;for(;a!==null&&r<e;r++,a=a.next)s.push(a.value);return s};S.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var s=new S;if(e<t||e<0)return s;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,a=this.tail;a!==null&&r>e;r--)a=a.prev;for(;a!==null&&r>t;r--,a=a.prev)s.push(a.value);return s};S.prototype.splice=function(t,e,...s){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,a=this.head;a!==null&&r<t;r++)a=a.next;for(var n=[],r=0;a&&r<e;r++)n.push(a.value),a=this.removeNode(a);a===null&&(a=this.tail),a!==this.head&&a!==this.tail&&(a=a.prev);for(var r=0;r<s.length;r++)a=ar(this,a,s[r]);return n};S.prototype.reverse=function(){for(var t=this.head,e=this.tail,s=t;s!==null;s=s.prev){var r=s.prev;s.prev=s.next,s.next=r}return this.head=e,this.tail=t,this};function ar(t,e,s){var r=e===t.head?new X(s,null,e,t):new X(s,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function nr(t,e){t.tail=new X(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function ir(t,e){t.head=new X(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function X(t,e,s,r){if(!(this instanceof X))return new X(t,e,s,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,s?(s.prev=this,this.next=s):this.next=null}try{sr()(S)}catch{}const or=rr,Y=Symbol("max"),B=Symbol("length"),K=Symbol("lengthCalculator"),le=Symbol("allowStale"),U=Symbol("maxAge"),G=Symbol("dispose"),st=Symbol("noDisposeOnSet"),C=Symbol("lruList"),_=Symbol("cache"),Ct=Symbol("updateAgeOnGet"),Me=()=>1;class lr{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[Y]=e.max||1/0;const s=e.length||Me;if(this[K]=typeof s!="function"?Me:s,this[le]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[U]=e.maxAge||0,this[G]=e.dispose,this[st]=e.noDisposeOnSet||!1,this[Ct]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Y]=e||1/0,ie(this)}get max(){return this[Y]}set allowStale(e){this[le]=!!e}get allowStale(){return this[le]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[U]=e,ie(this)}get maxAge(){return this[U]}set lengthCalculator(e){typeof e!="function"&&(e=Me),e!==this[K]&&(this[K]=e,this[B]=0,this[C].forEach(s=>{s.length=this[K](s.value,s.key),this[B]+=s.length})),ie(this)}get lengthCalculator(){return this[K]}get length(){return this[B]}get itemCount(){return this[C].length}rforEach(e,s){s=s||this;for(let r=this[C].tail;r!==null;){const a=r.prev;rt(this,e,r,s),r=a}}forEach(e,s){s=s||this;for(let r=this[C].head;r!==null;){const a=r.next;rt(this,e,r,s),r=a}}keys(){return this[C].toArray().map(e=>e.key)}values(){return this[C].toArray().map(e=>e.value)}reset(){this[G]&&this[C]&&this[C].length&&this[C].forEach(e=>this[G](e.key,e.value)),this[_]=new Map,this[C]=new or,this[B]=0}dump(){return this[C].map(e=>me(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[C]}set(e,s,r){if(r=r||this[U],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const a=r?Date.now():0,n=this[K](s,e);if(this[_].has(e)){if(n>this[Y])return te(this,this[_].get(e)),!1;const u=this[_].get(e).value;return this[G]&&(this[st]||this[G](e,u.value)),u.now=a,u.maxAge=r,u.value=s,this[B]+=n-u.length,u.length=n,this.get(e),ie(this),!0}const o=new cr(e,s,n,a,r);return o.length>this[Y]?(this[G]&&this[G](e,s),!1):(this[B]+=o.length,this[C].unshift(o),this[_].set(e,this[C].head),ie(this),!0)}has(e){if(!this[_].has(e))return!1;const s=this[_].get(e).value;return!me(this,s)}get(e){return Te(this,e,!0)}peek(e){return Te(this,e,!1)}pop(){const e=this[C].tail;return e?(te(this,e),e.value):null}del(e){te(this,this[_].get(e))}load(e){this.reset();const s=Date.now();for(let r=e.length-1;r>=0;r--){const a=e[r],n=a.e||0;if(n===0)this.set(a.k,a.v);else{const o=n-s;o>0&&this.set(a.k,a.v,o)}}}prune(){this[_].forEach((e,s)=>Te(this,s,!1))}}const Te=(t,e,s)=>{const r=t[_].get(e);if(r){const a=r.value;if(me(t,a)){if(te(t,r),!t[le])return}else s&&(t[Ct]&&(r.value.now=Date.now()),t[C].unshiftNode(r));return a.value}},me=(t,e)=>{if(!e||!e.maxAge&&!t[U])return!1;const s=Date.now()-e.now;return e.maxAge?s>e.maxAge:t[U]&&s>t[U]},ie=t=>{if(t[B]>t[Y])for(let e=t[C].tail;t[B]>t[Y]&&e!==null;){const s=e.prev;te(t,e),e=s}},te=(t,e)=>{if(e){const s=e.value;t[G]&&t[G](s.key,s.value),t[B]-=s.length,t[_].delete(s.key),t[C].removeNode(e)}};class cr{constructor(e,s,r,a,n){this.key=e,this.value=s,this.length=r,this.now=a,this.maxAge=n||0}}const rt=(t,e,s,r)=>{let a=s.value;me(t,a)&&(te(t,s),t[le]||(a=void 0)),a&&e.call(r,a.value,a.key,t)};var ur=lr,Ae,at;function V(){if(at)return Ae;at=1;class t{constructor(c,$){if($=r($),c instanceof t)return c.loose===!!$.loose&&c.includePrerelease===!!$.includePrerelease?c:new t(c.raw,$);if(c instanceof a)return this.raw=c.value,this.set=[[c]],this.format(),this;if(this.options=$,this.loose=!!$.loose,this.includePrerelease=!!$.includePrerelease,this.raw=c.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(m=>this.parseRange(m.trim())).filter(m=>m.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const m=this.set[0];if(this.set=this.set.filter(v=>!k(v[0])),this.set.length===0)this.set=[m];else if(this.set.length>1){for(const v of this.set)if(v.length===1&&z(v[0])){this.set=[v];break}}}this.format()}format(){return this.range=this.set.map(c=>c.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(c){const m=((this.options.includePrerelease&&y)|(this.options.loose&&g))+":"+c,v=s.get(m);if(v)return v;const p=this.options.loose,x=p?h[u.HYPHENRANGELOOSE]:h[u.HYPHENRANGE];c=c.replace(x,O(this.options.includePrerelease)),n("hyphen replace",c),c=c.replace(h[u.COMPARATORTRIM],P),n("comparator trim",c),c=c.replace(h[u.TILDETRIM],l),n("tilde trim",c),c=c.replace(h[u.CARETTRIM],d),n("caret trim",c);let w=c.split(" ").map(R=>Q(R,this.options)).join(" ").split(/\s+/).map(R=>M(R,this.options));p&&(w=w.filter(R=>(n("loose invalid filter",R,this.options),!!R.match(h[u.COMPARATORLOOSE])))),n("range list",w);const j=new Map,b=w.map(R=>new a(R,this.options));for(const R of b){if(k(R))return[R];j.set(R.value,R)}j.size>1&&j.has("")&&j.delete("");const A=[...j.values()];return s.set(m,A),A}intersects(c,$){if(!(c instanceof t))throw new TypeError("a Range is required");return this.set.some(m=>Z(m,$)&&c.set.some(v=>Z(v,$)&&m.every(p=>v.every(x=>p.intersects(x,$)))))}test(c){if(!c)return!1;if(typeof c=="string")try{c=new o(c,this.options)}catch{return!1}for(let $=0;$<this.set.length;$++)if(be(this.set[$],c,this.options))return!0;return!1}}Ae=t;const e=ur,s=new e({max:1e3}),r=wt,a=Se(),n=St,o=L,{safeRe:h,t:u,comparatorTrimReplace:P,tildeTrimReplace:l,caretTrimReplace:d}=ye,{FLAG_INCLUDE_PRERELEASE:y,FLAG_LOOSE:g}=Pt,k=f=>f.value==="<0.0.0-0",z=f=>f.value==="",Z=(f,c)=>{let $=!0;const m=f.slice();let v=m.pop();for(;$&&m.length;)$=m.every(p=>v.intersects(p,c)),v=m.pop();return $},Q=(f,c)=>(n("comp",f,c),f=q(f,c),n("caret",f),f=se(f,c),n("tildes",f),f=ae(f,c),n("xrange",f),f=de(f,c),n("stars",f),f),E=f=>!f||f.toLowerCase()==="x"||f==="*",se=(f,c)=>f.trim().split(/\s+/).map($=>re($,c)).join(" "),re=(f,c)=>{const $=c.loose?h[u.TILDELOOSE]:h[u.TILDE];return f.replace($,(m,v,p,x,w)=>{n("tilde",f,m,v,p,x,w);let j;return E(v)?j="":E(p)?j=`>=${v}.0.0 <${+v+1}.0.0-0`:E(x)?j=`>=${v}.${p}.0 <${v}.${+p+1}.0-0`:w?(n("replaceTilde pr",w),j=`>=${v}.${p}.${x}-${w} <${v}.${+p+1}.0-0`):j=`>=${v}.${p}.${x} <${v}.${+p+1}.0-0`,n("tilde return",j),j})},q=(f,c)=>f.trim().split(/\s+/).map($=>D($,c)).join(" "),D=(f,c)=>{n("caret",f,c);const $=c.loose?h[u.CARETLOOSE]:h[u.CARET],m=c.includePrerelease?"-0":"";return f.replace($,(v,p,x,w,j)=>{n("caret",f,v,p,x,w,j);let b;return E(p)?b="":E(x)?b=`>=${p}.0.0${m} <${+p+1}.0.0-0`:E(w)?p==="0"?b=`>=${p}.${x}.0${m} <${p}.${+x+1}.0-0`:b=`>=${p}.${x}.0${m} <${+p+1}.0.0-0`:j?(n("replaceCaret pr",j),p==="0"?x==="0"?b=`>=${p}.${x}.${w}-${j} <${p}.${x}.${+w+1}-0`:b=`>=${p}.${x}.${w}-${j} <${p}.${+x+1}.0-0`:b=`>=${p}.${x}.${w}-${j} <${+p+1}.0.0-0`):(n("no pr"),p==="0"?x==="0"?b=`>=${p}.${x}.${w}${m} <${p}.${x}.${+w+1}-0`:b=`>=${p}.${x}.${w}${m} <${p}.${+x+1}.0-0`:b=`>=${p}.${x}.${w} <${+p+1}.0.0-0`),n("caret return",b),b})},ae=(f,c)=>(n("replaceXRanges",f,c),f.split(/\s+/).map($=>we($,c)).join(" ")),we=(f,c)=>{f=f.trim();const $=c.loose?h[u.XRANGELOOSE]:h[u.XRANGE];return f.replace($,(m,v,p,x,w,j)=>{n("xRange",f,m,v,p,x,w,j);const b=E(p),A=b||E(x),R=A||E(w),ne=R;return v==="="&&ne&&(v=""),j=c.includePrerelease?"-0":"",b?v===">"||v==="<"?m="<0.0.0-0":m="*":v&&ne?(A&&(x=0),w=0,v===">"?(v=">=",A?(p=+p+1,x=0,w=0):(x=+x+1,w=0)):v==="<="&&(v="<",A?p=+p+1:x=+x+1),v==="<"&&(j="-0"),m=`${v+p}.${x}.${w}${j}`):A?m=`>=${p}.0.0${j} <${+p+1}.0.0-0`:R&&(m=`>=${p}.${x}.0${j} <${p}.${+x+1}.0-0`),n("xRange return",m),m})},de=(f,c)=>(n("replaceStars",f,c),f.trim().replace(h[u.STAR],"")),M=(f,c)=>(n("replaceGTE0",f,c),f.trim().replace(h[c.includePrerelease?u.GTE0PRE:u.GTE0],"")),O=f=>(c,$,m,v,p,x,w,j,b,A,R,ne,Qa)=>(E(m)?$="":E(v)?$=`>=${m}.0.0${f?"-0":""}`:E(p)?$=`>=${m}.${v}.0${f?"-0":""}`:x?$=`>=${$}`:$=`>=${$}${f?"-0":""}`,E(b)?j="":E(A)?j=`<${+b+1}.0.0-0`:E(R)?j=`<${b}.${+A+1}.0-0`:ne?j=`<=${b}.${A}.${R}-${ne}`:f?j=`<${b}.${A}.${+R+1}-0`:j=`<=${j}`,`${$} ${j}`.trim()),be=(f,c,$)=>{for(let m=0;m<f.length;m++)if(!f[m].test(c))return!1;if(c.prerelease.length&&!$.includePrerelease){for(let m=0;m<f.length;m++)if(n(f[m].semver),f[m].semver!==a.ANY&&f[m].semver.prerelease.length>0){const v=f[m].semver;if(v.major===c.major&&v.minor===c.minor&&v.patch===c.patch)return!0}return!1}return!0};return Ae}var Le,nt;function Se(){if(nt)return Le;nt=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(l,d){if(d=s(d),l instanceof e){if(l.loose===!!d.loose)return l;l=l.value}l=l.trim().split(/\s+/).join(" "),o("comparator",l,d),this.options=d,this.loose=!!d.loose,this.parse(l),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(l){const d=this.options.loose?r[a.COMPARATORLOOSE]:r[a.COMPARATOR],y=l.match(d);if(!y)throw new TypeError(`Invalid comparator: ${l}`);this.operator=y[1]!==void 0?y[1]:"",this.operator==="="&&(this.operator=""),y[2]?this.semver=new h(y[2],this.options.loose):this.semver=t}toString(){return this.value}test(l){if(o("Comparator.test",l,this.options.loose),this.semver===t||l===t)return!0;if(typeof l=="string")try{l=new h(l,this.options)}catch{return!1}return n(l,this.operator,this.semver,this.options)}intersects(l,d){if(!(l instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(l.value,d).test(this.value):l.operator===""?l.value===""?!0:new u(this.value,d).test(l.semver):(d=s(d),d.includePrerelease&&(this.value==="<0.0.0-0"||l.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||l.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&l.operator.startsWith(">")||this.operator.startsWith("<")&&l.operator.startsWith("<")||this.semver.version===l.semver.version&&this.operator.includes("=")&&l.operator.includes("=")||n(this.semver,"<",l.semver,d)&&this.operator.startsWith(">")&&l.operator.startsWith("<")||n(this.semver,">",l.semver,d)&&this.operator.startsWith("<")&&l.operator.startsWith(">")))}}Le=e;const s=wt,{safeRe:r,t:a}=ye,n=Et,o=St,h=L,u=V();return Le}const hr=V(),dr=(t,e,s)=>{try{e=new hr(e,s)}catch{return!1}return e.test(t)};var Pe=dr;const fr=V(),gr=(t,e)=>new fr(t,e).set.map(s=>s.map(r=>r.value).join(" ").trim().split(" "));var pr=gr;const mr=L,vr=V(),$r=(t,e,s)=>{let r=null,a=null,n=null;try{n=new vr(e,s)}catch{return null}return t.forEach(o=>{n.test(o)&&(!r||a.compare(o)===-1)&&(r=o,a=new mr(r,s))}),r};var xr=$r;const yr=L,jr=V(),Sr=(t,e,s)=>{let r=null,a=null,n=null;try{n=new jr(e,s)}catch{return null}return t.forEach(o=>{n.test(o)&&(!r||a.compare(o)===1)&&(r=o,a=new yr(r,s))}),r};var Pr=Sr;const Oe=L,wr=V(),it=je,br=(t,e)=>{t=new wr(t,e);let s=new Oe("0.0.0");if(t.test(s)||(s=new Oe("0.0.0-0"),t.test(s)))return s;s=null;for(let r=0;r<t.set.length;++r){const a=t.set[r];let n=null;a.forEach(o=>{const h=new Oe(o.semver.version);switch(o.operator){case">":h.prerelease.length===0?h.patch++:h.prerelease.push(0),h.raw=h.format();case"":case">=":(!n||it(h,n))&&(n=h);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),n&&(!s||it(s,n))&&(s=n)}return s&&t.test(s)?s:null};var Rr=br;const Er=V(),Cr=(t,e)=>{try{return new Er(t,e).range||"*"}catch{return null}};var Mr=Cr;const Tr=L,Mt=Se(),{ANY:Ar}=Mt,Lr=V(),Or=Pe,ot=je,lt=De,kr=Be,_r=Ge,Nr=(t,e,s,r)=>{t=new Tr(t,r),e=new Lr(e,r);let a,n,o,h,u;switch(s){case">":a=ot,n=kr,o=lt,h=">",u=">=";break;case"<":a=lt,n=_r,o=ot,h="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Or(t,e,r))return!1;for(let P=0;P<e.set.length;++P){const l=e.set[P];let d=null,y=null;if(l.forEach(g=>{g.semver===Ar&&(g=new Mt(">=0.0.0")),d=d||g,y=y||g,a(g.semver,d.semver,r)?d=g:o(g.semver,y.semver,r)&&(y=g)}),d.operator===h||d.operator===u||(!y.operator||y.operator===h)&&n(t,y.semver))return!1;if(y.operator===u&&o(t,y.semver))return!1}return!0};var ze=Nr;const Ir=ze,Vr=(t,e,s)=>Ir(t,e,">",s);var Dr=Vr;const Fr=ze,Gr=(t,e,s)=>Fr(t,e,"<",s);var Br=Gr;const ct=V(),zr=(t,e,s)=>(t=new ct(t,s),e=new ct(e,s),t.intersects(e,s));var qr=zr;const Hr=Pe,Yr=F;var Ur=(t,e,s)=>{const r=[];let a=null,n=null;const o=t.sort((l,d)=>Yr(l,d,s));for(const l of o)Hr(l,e,s)?(n=l,a||(a=l)):(n&&r.push([a,n]),n=null,a=null);a&&r.push([a,null]);const h=[];for(const[l,d]of r)l===d?h.push(l):!d&&l===o[0]?h.push("*"):d?l===o[0]?h.push(`<=${d}`):h.push(`${l} - ${d}`):h.push(`>=${l}`);const u=h.join(" || "),P=typeof e.raw=="string"?e.raw:String(e);return u.length<P.length?u:e};const ut=V(),qe=Se(),{ANY:ke}=qe,oe=Pe,He=F,Wr=(t,e,s={})=>{if(t===e)return!0;t=new ut(t,s),e=new ut(e,s);let r=!1;e:for(const a of t.set){for(const n of e.set){const o=Zr(a,n,s);if(r=r||o!==null,o)continue e}if(r)return!1}return!0},Xr=[new qe(">=0.0.0-0")],ht=[new qe(">=0.0.0")],Zr=(t,e,s)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===ke){if(e.length===1&&e[0].semver===ke)return!0;s.includePrerelease?t=Xr:t=ht}if(e.length===1&&e[0].semver===ke){if(s.includePrerelease)return!0;e=ht}const r=new Set;let a,n;for(const g of t)g.operator===">"||g.operator===">="?a=dt(a,g,s):g.operator==="<"||g.operator==="<="?n=ft(n,g,s):r.add(g.semver);if(r.size>1)return null;let o;if(a&&n){if(o=He(a.semver,n.semver,s),o>0)return null;if(o===0&&(a.operator!==">="||n.operator!=="<="))return null}for(const g of r){if(a&&!oe(g,String(a),s)||n&&!oe(g,String(n),s))return null;for(const k of e)if(!oe(g,String(k),s))return!1;return!0}let h,u,P,l,d=n&&!s.includePrerelease&&n.semver.prerelease.length?n.semver:!1,y=a&&!s.includePrerelease&&a.semver.prerelease.length?a.semver:!1;d&&d.prerelease.length===1&&n.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(const g of e){if(l=l||g.operator===">"||g.operator===">=",P=P||g.operator==="<"||g.operator==="<=",a){if(y&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===y.major&&g.semver.minor===y.minor&&g.semver.patch===y.patch&&(y=!1),g.operator===">"||g.operator===">="){if(h=dt(a,g,s),h===g&&h!==a)return!1}else if(a.operator===">="&&!oe(a.semver,String(g),s))return!1}if(n){if(d&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===d.major&&g.semver.minor===d.minor&&g.semver.patch===d.patch&&(d=!1),g.operator==="<"||g.operator==="<="){if(u=ft(n,g,s),u===g&&u!==n)return!1}else if(n.operator==="<="&&!oe(n.semver,String(g),s))return!1}if(!g.operator&&(n||a)&&o!==0)return!1}return!(a&&P&&!n&&o!==0||n&&l&&!a&&o!==0||y||d)},dt=(t,e,s)=>{if(!t)return e;const r=He(t.semver,e.semver,s);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},ft=(t,e,s)=>{if(!t)return e;const r=He(t.semver,e.semver,s);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};var Qr=Wr;const _e=ye,gt=Pt,Jr=L,pt=ts,Kr=he,ea=ss,ta=ns,sa=os,ra=cs,aa=ds,na=ps,ia=$s,oa=js,la=F,ca=ws,ua=Es,ha=Fe,da=As,fa=ks,ga=je,pa=De,ma=bt,va=Rt,$a=Ge,xa=Be,ya=Et,ja=tr,Sa=Se(),Pa=V(),wa=Pe,ba=pr,Ra=xr,Ea=Pr,Ca=Rr,Ma=Mr,Ta=ze,Aa=Dr,La=Br,Oa=qr,ka=Ur,_a=Qr;var ve={parse:Kr,valid:ea,clean:ta,inc:sa,diff:ra,major:aa,minor:na,patch:ia,prerelease:oa,compare:la,rcompare:ca,compareLoose:ua,compareBuild:ha,sort:da,rsort:fa,gt:ga,lt:pa,eq:ma,neq:va,gte:$a,lte:xa,cmp:ya,coerce:ja,Comparator:Sa,Range:Pa,satisfies:wa,toComparators:ba,maxSatisfying:Ra,minSatisfying:Ea,minVersion:Ca,validRange:Ma,outside:Ta,gtr:Aa,ltr:La,intersects:Oa,simplifyRange:ka,subset:_a,SemVer:Jr,re:_e.re,src:_e.src,tokens:_e.t,SEMVER_SPEC_VERSION:gt.SEMVER_SPEC_VERSION,RELEASE_TYPES:gt.RELEASE_TYPES,compareIdentifiers:pt.compareIdentifiers,rcompareIdentifiers:pt.rcompareIdentifiers};function Na(t,e){const[s,r]=W.useState(t);return W.useEffect(()=>{const a=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(a)}},[t,e]),s}const Ia=({handleSelectClear:t,handleSelectChange:e,npmPackageType:s,possibleCategories:r,possibleCollections:a,query:n})=>{const{formatMessage:o}=I(),h=(u,P)=>{const l={[P]:(n[P]??[]).filter(d=>d!==u)};e(l)};return i.jsxs(Ee.Root,{children:[i.jsx(Ee.Trigger,{children:i.jsx(Ne,{variant:"tertiary",startIcon:i.jsx(Vt,{}),children:o({id:"app.utils.filters",defaultMessage:"Filters"})})}),i.jsx(Ee.Content,{sideOffset:4,children:i.jsxs(N,{padding:3,direction:"column",alignItems:"stretch",gap:1,children:[i.jsx(mt,{message:o({id:"admin.pages.MarketPlacePage.filters.collections",defaultMessage:"Collections"}),value:n?.collections||[],onChange:u=>{e({collections:u})},onClear:()=>t("collections"),possibleFilters:a,customizeContent:u=>o({id:"admin.pages.MarketPlacePage.filters.collectionsSelected",defaultMessage:"{count, plural, =0 {No collections} one {# collection} other {# collections}} selected"},{count:u?.length??0})}),s==="plugin"&&i.jsx(mt,{message:o({id:"admin.pages.MarketPlacePage.filters.categories",defaultMessage:"Categories"}),value:n?.categories||[],onChange:u=>{e({categories:u})},onClear:()=>t("categories"),possibleFilters:r,customizeContent:u=>o({id:"admin.pages.MarketPlacePage.filters.categoriesSelected",defaultMessage:"{count, plural, =0 {No categories} one {# category} other {# categories}} selected"},{count:u?.length??0})})]})}),n.collections?.map(u=>i.jsx(T,{padding:1,children:i.jsx(Ye,{icon:i.jsx(Ue,{}),onClick:()=>h(u,"collections"),children:u})},u)),s==="plugin"&&n.categories?.map(u=>i.jsx(T,{padding:1,children:i.jsx(Ye,{icon:i.jsx(Ue,{}),onClick:()=>h(u,"categories"),children:u})},u))]})},mt=({message:t,value:e,onChange:s,possibleFilters:r,onClear:a,customizeContent:n})=>i.jsx(Dt,{"data-testid":`${t}-button`,"aria-label":t,placeholder:t,onChange:s,onClear:a,value:e,customizeContent:n,children:Object.entries(r).map(([o,h])=>i.jsx(Ft,{"data-testid":`${o}-${h}`,value:o,children:`${o} (${h})`},o))}),Va=$e(H)`
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  overflow: hidden;
`,Da=({npmPackage:t,isInstalled:e,useYarn:s,isInDevelopmentMode:r,npmPackageType:a,strapiAppVersion:n})=>{const{attributes:o}=t,{formatMessage:h}=I(),{trackUsage:u}=xe(),P=s?`yarn add ${o.npmPackageName}`:`npm install ${o.npmPackageName}`,l=h({id:"admin.pages.MarketPlacePage.plugin.tooltip.madeByStrapi",defaultMessage:"Made by Strapi"}),d=`https://market.strapi.io/${Ut.plural(a)}/${o.slug}`,y=ve.validRange(o.strapiVersion),g=ve.satisfies(n??"",y??"");return i.jsxs(N,{direction:"column",justifyContent:"space-between",paddingTop:4,paddingRight:4,paddingBottom:4,paddingLeft:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",height:"100%",alignItems:"normal","data-testid":"npm-package-card",children:[i.jsxs(T,{children:[i.jsxs(N,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[i.jsx(T,{tag:"img",src:o.logo.url,alt:`${o.name} logo`,hasRadius:!0,width:11,height:11}),i.jsx(Ba,{githubStars:o.githubStars,npmDownloads:o.npmDownloads,npmPackageType:a})]}),i.jsx(T,{paddingTop:4,children:i.jsx(H,{tag:"h3",variant:"delta",children:i.jsxs(N,{alignItems:"center",gap:o.validated&&!o.madeByStrapi?2:1,children:[o.name,o.validated&&!o.madeByStrapi&&i.jsx(Ie,{description:h({id:"admin.pages.MarketPlacePage.plugin.tooltip.verified",defaultMessage:"Plugin verified by Strapi"}),children:i.jsx(Wt,{fill:"success600"})}),o.madeByStrapi&&i.jsx(Ie,{description:l,children:i.jsx(T,{tag:"img",src:Xt,alt:l,width:6,height:"auto"})})]})})}),i.jsx(T,{paddingTop:2,children:i.jsx(Va,{tag:"p",variant:"omega",textColor:"neutral600",children:o.description})})]}),i.jsxs(N,{gap:2,style:{alignSelf:"flex-end"},paddingTop:6,children:[i.jsx(jt,{size:"S",href:d,isExternal:!0,endIcon:i.jsx(yt,{}),"aria-label":h({id:"admin.pages.MarketPlacePage.plugin.info.label",defaultMessage:"Learn more about {pluginName}"},{pluginName:o.name}),variant:"tertiary",onClick:()=>u("didPluginLearnMore"),children:h({id:"admin.pages.MarketPlacePage.plugin.info.text",defaultMessage:"More"})}),i.jsx(Fa,{isInstalled:e,isInDevelopmentMode:r,isCompatible:g,commandToCopy:P,strapiAppVersion:n,strapiPeerDepVersion:o.strapiVersion,pluginName:o.name})]})]})},Fa=({isInstalled:t,isInDevelopmentMode:e,isCompatible:s,commandToCopy:r,strapiAppVersion:a,strapiPeerDepVersion:n,pluginName:o})=>{const{toggleNotification:h}=Ve(),{formatMessage:u}=I(),{trackUsage:P}=xe(),{copy:l}=Zt(),d=async()=>{await l(r)&&(P("willInstallPlugin"),h({type:"success",message:u({id:"admin.pages.MarketPlacePage.plugin.copy.success"})}))};return t?i.jsxs(N,{gap:2,paddingLeft:4,children:[i.jsx(Qt,{width:"1.2rem",height:"1.2rem",color:"success600"}),i.jsx(H,{variant:"omega",textColor:"success600",fontWeight:"bold",children:u({id:"admin.pages.MarketPlacePage.plugin.installed",defaultMessage:"Installed"})})]}):e&&s!==!1?i.jsx(Ga,{strapiAppVersion:a,strapiPeerDepVersion:n,handleCopy:d,pluginName:o}):null},Ga=({strapiPeerDepVersion:t,strapiAppVersion:e,handleCopy:s,pluginName:r})=>{const{formatMessage:a}=I(),n=ve.validRange(t),o=ve.satisfies(e??"",n??""),h=a({id:"admin.pages.MarketPlacePage.plugin.copy",defaultMessage:"Copy install command"});return e&&(!n||!o)?i.jsx(Ie,{"data-testid":`tooltip-${r}`,label:n?a({id:"admin.pages.MarketPlacePage.plugin.version",defaultMessage:'Update your Strapi version: "{strapiAppVersion}" to: "{versionRange}"'},{strapiAppVersion:e,versionRange:n}):a({id:"admin.pages.MarketPlacePage.plugin.version.null",defaultMessage:'Unable to verify compatibility with your Strapi version: "{strapiAppVersion}"'},{strapiAppVersion:e}),children:i.jsx("span",{children:i.jsx(Ne,{size:"S",startIcon:i.jsx(Qe,{}),variant:"secondary",onClick:s,disabled:!o,children:h})})}):i.jsx(Ne,{size:"S",startIcon:i.jsx(Qe,{}),variant:"secondary",onClick:s,children:h})},Ba=({githubStars:t=0,npmDownloads:e=0,npmPackageType:s})=>{const{formatMessage:r}=I();return i.jsxs(N,{gap:1,children:[!!t&&i.jsxs(i.Fragment,{children:[i.jsx(Jt,{height:"1.2rem",width:"1.2rem","aria-hidden":!0}),i.jsx(Kt,{height:"1.2rem",width:"1.2rem",fill:"warning500","aria-hidden":!0}),i.jsx("p",{"aria-label":r({id:`admin.pages.MarketPlacePage.${s}.githubStars`,defaultMessage:"This {package} was starred {starsCount} on GitHub"},{starsCount:t,package:s}),children:i.jsx(H,{variant:"pi",textColor:"neutral800",children:t})}),i.jsx(za,{})]}),i.jsx(es,{height:"1.2rem",width:"1.2rem","aria-hidden":!0}),i.jsx("p",{"aria-label":r({id:`admin.pages.MarketPlacePage.${s}.downloads`,defaultMessage:"This {package} has {downloadsCount} weekly downloads"},{downloadsCount:e,package:s}),children:i.jsx(H,{variant:"pi",textColor:"neutral800",children:e})})]})},za=$e(At)`
  width: 1.2rem;
  transform: rotate(90deg);
`,vt=({status:t,npmPackages:e=[],installedPackageNames:s=[],useYarn:r,isInDevelopmentMode:a,npmPackageType:n,strapiAppVersion:o,debouncedSearch:h})=>{const{formatMessage:u}=I();if(t==="error")return i.jsx(ue.Error,{});if(t==="loading")return i.jsx(ue.Loading,{});const P=u({id:"admin.pages.MarketPlacePage.search.empty",defaultMessage:'No result for "{target}"'},{target:h});return e.length===0?i.jsxs(T,{position:"relative",children:[i.jsx(ce.Grid,{size:"M",children:Array(12).fill(null).map((l,d)=>i.jsx(qa,{height:"234px",hasRadius:!0},d))}),i.jsx(T,{position:"absolute",top:11,width:"100%",children:i.jsxs(N,{alignItems:"center",justifyContent:"center",direction:"column",children:[i.jsx(Gt,{width:"160px",height:"88px"}),i.jsx(T,{paddingTop:6,children:i.jsx(H,{variant:"delta",tag:"p",textColor:"neutral600",children:P})})]})})]}):i.jsx(We.Root,{gap:4,children:e.map(l=>i.jsx(We.Item,{col:4,s:6,xs:12,style:{height:"100%"},direction:"column",alignItems:"stretch",children:i.jsx(Da,{npmPackage:l,isInstalled:s.includes(l.attributes.npmPackageName),useYarn:r,isInDevelopmentMode:a,npmPackageType:n,strapiAppVersion:o})},l.id))})},qa=$e(T)`
  background: ${({theme:t})=>`linear-gradient(180deg, rgba(234, 234, 239, 0) 0%, ${t.colors.neutral150} 100%)`};
  opacity: 0.33;
`,Tt=({isOnline:t,npmPackageType:e="plugin"})=>{const{formatMessage:s}=I(),{trackUsage:r}=xe(),a=e==="provider"?"didSubmitProvider":"didSubmitPlugin";return i.jsx(ce.Header,{title:s({id:"global.marketplace",defaultMessage:"Marketplace"}),subtitle:s({id:"admin.pages.MarketPlacePage.subtitle",defaultMessage:"Get more out of Strapi"}),primaryAction:t&&i.jsx(jt,{startIcon:i.jsx(Bt,{}),variant:"tertiary",href:`https://market.strapi.io/submit-${e}`,onClick:()=>r(a),isExternal:!0,children:s({id:`admin.pages.MarketPlacePage.submit.${e}.link`,defaultMessage:`Submit ${e}`})})})},Ha=()=>{const{formatMessage:t}=I();return i.jsx(ce.Root,{children:i.jsxs(zt,{children:[i.jsx(Tt,{}),i.jsxs(N,{width:"100%",direction:"column",alignItems:"center",justifyContent:"center",paddingTop:"12rem",children:[i.jsx(T,{paddingBottom:2,children:i.jsx(H,{textColor:"neutral700",variant:"alpha",children:t({id:"admin.pages.MarketPlacePage.offline.title",defaultMessage:"You are offline"})})}),i.jsx(T,{paddingBottom:6,children:i.jsx(H,{textColor:"neutral700",variant:"epsilon",children:t({id:"admin.pages.MarketPlacePage.offline.subtitle",defaultMessage:"You need to be connected to the Internet to access Strapi Market."})})}),i.jsxs("svg",{width:"88",height:"88",viewBox:"0 0 88 88",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("rect",{x:".5",y:".5",width:"87",height:"87",rx:"43.5",fill:"#F0F0FF"}),i.jsx("path",{d:"M34 39.3h-4c-2.6 0-4.7 1-6.6 2.8a9 9 0 0 0-2.7 6.6 9 9 0 0 0 2.7 6.6A9 9 0 0 0 30 58h22.8L34 39.3Zm-11-11 3-3 39 39-3 3-4.7-4.6H30a13.8 13.8 0 0 1-14-14c0-3.8 1.3-7 4-9.7 2.6-2.7 5.7-4.2 9.5-4.3L23 28.2Zm38.2 11.1c3 .2 5.5 1.5 7.6 3.7A11 11 0 0 1 72 51c0 4-1.6 7.2-5 9.5l-3.3-3.4a6.5 6.5 0 0 0 3.6-6.1c0-1.9-.7-3.5-2-5-1.5-1.3-3.1-2-5-2h-3.5v-1.2c0-3.6-1.2-6.6-3.7-9a13 13 0 0 0-15-2.3L34.6 28a17 17 0 0 1 20.3 1.5c3.5 2.7 5.5 6 6.3 10Z",fill:"#4945FF"}),i.jsx("rect",{x:".5",y:".5",width:"87",height:"87",rx:"43.5",stroke:"#D9D8FF"})]})]})]})})},$t={"name:asc":{selected:{id:"admin.pages.MarketPlacePage.sort.alphabetical.selected",defaultMessage:"Sort by alphabetical order"},option:{id:"admin.pages.MarketPlacePage.sort.alphabetical",defaultMessage:"Alphabetical order"}},"submissionDate:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.newest.selected",defaultMessage:"Sort by newest"},option:{id:"admin.pages.MarketPlacePage.sort.newest",defaultMessage:"Newest"}},"githubStars:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.githubStars.selected",defaultMessage:"Sort by GitHub stars"},option:{id:"admin.pages.MarketPlacePage.sort.githubStars",defaultMessage:"Number of GitHub stars"}},"npmDownloads:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.npmDownloads.selected",defaultMessage:"Sort by npm downloads"},option:{id:"admin.pages.MarketPlacePage.sort.npmDownloads",defaultMessage:"Number of downloads"}}},Ya=({sortQuery:t,handleSelectChange:e})=>{const{formatMessage:s}=I();return i.jsx(Ua,{children:i.jsx(qt,{value:t,customizeContent:()=>s($t[t].selected),onChange:r=>{e({sort:r})},"aria-label":s({id:"admin.pages.MarketPlacePage.sort.label",defaultMessage:"Sort by"}),size:"S",children:Object.entries($t).map(([r,a])=>i.jsx(Ht,{value:r,children:s(a.option)},r))})})},Ua=$e(T)`
  font-weight: ${({theme:t})=>t.fontWeights.semiBold};

  span {
    font-size: ${({theme:t})=>t.fontSizes[1]};
  }
`,xt="https://market-api.strapi.io";function Wa({npmPackageType:t,debouncedSearch:e,query:s,tabQuery:r,strapiVersion:a}){const{notifyStatus:n}=Yt(),{formatMessage:o}=I(),{toggleNotification:h}=Ve(),u=o({id:"global.marketplace",defaultMessage:"Marketplace"}),P=()=>{n(o({id:"app.utils.notify.data-loaded",defaultMessage:"The {target} has loaded"},{target:u}))},l={page:s?.page||1,pageSize:s?.pageSize||24},d={...r.plugin,pagination:l,search:e,version:a},{data:y,status:g}=Xe(["marketplace","plugins",d],async()=>{try{const q=Ze.stringify(d),D=await fetch(`${xt}/plugins?${q}`);if(!D.ok)throw new Error("Failed to fetch marketplace plugins.");return await D.json()}catch{}return null},{onSuccess(){P()},onError(){h({type:"danger",message:o({id:"notification.error",defaultMessage:"An error occured"})})}}),k={...r.provider,pagination:l,search:e,version:a},{data:z,status:Z}=Xe(["marketplace","providers",k],async()=>{const q=Ze.stringify(k),D=await fetch(`${xt}/providers?${q}`);if(!D.ok)throw new Error("Failed to fetch marketplace providers.");return await D.json()},{onSuccess(){P()},onError(){h({type:"danger",message:o({id:"notification.error",defaultMessage:"An error occured"})})}}),Q=t==="plugin"?y:z,E=Q?.meta.collections??{},se=y?.meta.categories??{},{pagination:re}=Q?.meta??{};return{pluginsResponse:y,providersResponse:z,pluginsStatus:g,providersStatus:Z,possibleCollections:E,possibleCategories:se,pagination:re}}const Xa=()=>{const t=typeof navigator<"u"&&typeof navigator.onLine=="boolean"?navigator.onLine:!0,[e,s]=W.useState(t),r=()=>s(!0),a=()=>s(!1);return W.useEffect(()=>(window.addEventListener("online",r),window.addEventListener("offline",a),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",a)}),[]),e},ee="plugin",pe="provider",Za=()=>{const{formatMessage:t}=I(),{trackUsage:e}=xe(),{toggleNotification:s}=Ve(),[{query:r},a]=Lt(),n=Na(r?.search,500)||"",{autoReload:o,dependencies:h,useYarn:u,strapiVersion:P}=Ot("MarketplacePage",M=>M),l=Xa(),d=r?.npmPackageType||ee,[y,g]=W.useState({plugin:d===ee?{...r}:{},provider:d===pe?{...r}:{}});W.useEffect(()=>{e("didGoToMarketplace")},[e]),W.useEffect(()=>{o||s({type:"info",message:t({id:"admin.pages.MarketPlacePage.production",defaultMessage:"Manage plugins from the development environment"})})},[s,o,t]);const{pluginsResponse:k,providersResponse:z,pluginsStatus:Z,providersStatus:Q,possibleCollections:E,possibleCategories:se,pagination:re}=Wa({npmPackageType:d,debouncedSearch:n,query:r,tabQuery:y,strapiVersion:P});if(!l)return i.jsx(Ha,{});const q=M=>{const O=M===ee||M===pe?M:ee,be=y[O]&&Object.keys(y[O]).length;a(be?{...y[O],search:r?.search||"",npmPackageType:O,page:1}:{npmPackageType:O,collections:[],categories:[],sort:"name:asc",page:1,search:r?.search||""})},D=M=>{a({...M,page:1}),g(O=>({...O,[d]:{...O[d],...M}}))},ae=M=>{a({[M]:[],page:void 0},"remove"),g(O=>({...O,[d]:{}}))},we=({sort:M})=>D({sort:M}),de=Object.keys(h??{});return i.jsx(ce.Root,{children:i.jsxs(ue.Main,{children:[i.jsx(ue.Title,{children:t({id:"admin.pages.MarketPlacePage.head",defaultMessage:"Marketplace - Plugins"})}),i.jsx(Tt,{isOnline:l,npmPackageType:d}),i.jsx(ce.Content,{children:i.jsxs(J.Root,{variant:"simple",onValueChange:q,value:d,children:[i.jsxs(N,{justifyContent:"space-between",paddingBottom:4,children:[i.jsxs(J.List,{"aria-label":t({id:"admin.pages.MarketPlacePage.tab-group.label",defaultMessage:"Plugins and Providers for Strapi"}),children:[i.jsxs(J.Trigger,{value:ee,children:[t({id:"admin.pages.MarketPlacePage.plugins",defaultMessage:"Plugins"})," ",k?`(${k.meta.pagination.total})`:"..."]}),i.jsxs(J.Trigger,{value:pe,children:[t({id:"admin.pages.MarketPlacePage.providers",defaultMessage:"Providers"})," ",z?`(${z.meta.pagination.total})`:"..."]})]}),i.jsx(T,{width:"25%",children:i.jsx(kt,{name:"searchbar",onClear:()=>a({search:"",page:1}),value:r?.search,onChange:M=>a({search:M.target.value,page:1}),clearLabel:t({id:"admin.pages.MarketPlacePage.search.clear",defaultMessage:"Clear the search"}),placeholder:t({id:"admin.pages.MarketPlacePage.search.placeholder",defaultMessage:"Search"}),children:t({id:"admin.pages.MarketPlacePage.search.placeholder",defaultMessage:"Search"})})})]}),i.jsxs(N,{paddingBottom:4,gap:2,children:[i.jsx(Ya,{sortQuery:r?.sort||"name:asc",handleSelectChange:we}),i.jsx(Ia,{npmPackageType:d,possibleCollections:E,possibleCategories:se,query:r||{},handleSelectChange:D,handleSelectClear:ae})]}),i.jsx(J.Content,{value:ee,children:i.jsx(vt,{npmPackages:k?.data,status:Z,installedPackageNames:de,useYarn:u,isInDevelopmentMode:o,npmPackageType:"plugin",strapiAppVersion:P,debouncedSearch:n})}),i.jsx(J.Content,{value:pe,children:i.jsx(vt,{npmPackages:z?.data,status:Q,installedPackageNames:de,useYarn:u,isInDevelopmentMode:o,npmPackageType:"provider",debouncedSearch:n})}),i.jsxs(Re.Root,{...re,defaultPageSize:24,children:[i.jsx(Re.PageSize,{options:["12","24","50","100"]}),i.jsx(Re.Links,{})]}),i.jsx(T,{paddingTop:8,children:i.jsx("a",{href:"https://strapi.canny.io/plugin-requests",target:"_blank",rel:"noopener noreferrer nofollow",style:{textDecoration:"none"},onClick:()=>e("didMissMarketplacePlugin"),children:i.jsx(_t,{title:t({id:"admin.pages.MarketPlacePage.missingPlugin.title",defaultMessage:"Documentation"}),subtitle:t({id:"admin.pages.MarketPlacePage.missingPlugin.description",defaultMessage:"Tell us what plugin you are looking for and we'll let our community plugin developers know in case they are in search for inspiration!"}),icon:i.jsx(Nt,{}),iconBackground:"alternative100",endAction:i.jsx(yt,{fill:"neutral600",width:"1.2rem",height:"1.2rem",style:{marginLeft:"0.8rem"}})})})})]})})]})})},en=()=>{const t=It(e=>e.admin_app.permissions.marketplace?.main);return i.jsx(ue.Protect,{permissions:t,children:i.jsx(Za,{})})};export{Za as MarketplacePage,en as ProtectedMarketplacePage};
